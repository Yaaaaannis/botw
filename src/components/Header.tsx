import logo from '../assets/svg.svg';
import { useAudio } from '../context/AudioContext';
import { useEffect, useState } from 'react';
import { Link } from 'react-router-dom';

const navLinks = [
  { label: '[A1] ABOUT', href: '/' },
  { label: '[B1] NEWS', href: '/' },
  { label: '[C1] LEARN', href: '/' },
  { label: '[D1] CONTACT', href: '/contact' },
  { label: '[E1] JOIN US', href: '/join' },
];

const Header = () => {
  const { isPlaying, togglePlay } = useAudio();
  const [activeSection, setActiveSection] = useState('');

  useEffect(() => {
    const handleScroll = () => {
      const sections = document.querySelectorAll('section[id]');
      const scrollPosition = window.scrollY + window.innerHeight / 2;

      sections.forEach((section) => {
        const sectionElement = section as HTMLElement;
        const sectionTop = sectionElement.offsetTop;
        const sectionBottom = sectionTop + sectionElement.offsetHeight;

        if (scrollPosition >= sectionTop && scrollPosition <= sectionBottom) {
          setActiveSection(section.id);
        }
      });
    };

    window.addEventListener('scroll', handleScroll);
    handleScroll(); // Check initial position

    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const isNewsSection = activeSection === 'news' || activeSection === 'activities' || activeSection === 'contact';
  const textColorClass = isNewsSection ? 'text-black' : 'text-white';

  return (
    <header className="w-full flex justify-center pt-3 pb-2">
      <div className="w-full max-w-screen flex items-center justify-between px-4" style={{height: 40}}>
        {/* Logo texte Ã  gauche */}
        <div className="flex items-center justify-start " style={{width: 60}}>
          <span className={`font-semibold font-inter text-[12px] cursor-pointer ${textColorClass}`} style={{width: 120}}><svg width="86" height="42" viewBox="0 0 86 42" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M14.3093 14.2718C14.1309 15.2674 13.8189 16.1366 13.3731 16.8796C12.9274 17.6226 12.3999 18.2466 11.7906 18.7518C11.1963 19.2422 10.5351 19.6137 9.80697 19.8663C9.07887 20.104 8.34335 20.2229 7.6004 20.2229C6.73857 20.2229 5.89904 20.0594 5.08179 19.7325C4.26454 19.4056 3.52902 18.9153 2.87522 18.2615C2.23629 17.6077 1.71622 16.7904 1.31502 15.8098C0.92869 14.8291 0.735522 13.6849 0.735522 12.3773C0.735522 10.9508 0.943549 9.72497 1.3596 8.6997C1.77566 7.65957 2.33287 6.80517 3.03124 6.13652C3.74448 5.46786 4.5543 4.97751 5.4607 4.66547C6.38196 4.35343 7.34037 4.19741 8.33592 4.19741C9.13831 4.19741 9.93327 4.294 10.7208 4.48716C11.5232 4.68033 12.3033 4.95522 13.0611 5.31184L12.7268 5.9805C11.9244 5.50501 11.1071 5.15582 10.275 4.93293C9.45778 4.71005 8.65539 4.59861 7.86786 4.59861C7.0209 4.59861 6.21851 4.73234 5.4607 4.9998C4.70289 5.26726 4.04166 5.66846 3.47701 6.20338C2.92723 6.72345 2.48889 7.37725 2.16199 8.16478C1.83509 8.9523 1.67164 9.86614 1.67164 10.9063C1.67164 12.3179 1.85738 13.5437 2.22886 14.5839C2.61519 15.6092 3.11297 16.4561 3.72219 17.1248C4.34627 17.7934 5.05207 18.2912 5.8396 18.6181C6.62713 18.945 7.42952 19.1085 8.24677 19.1085C8.91542 19.1085 9.56922 19.0044 10.2082 18.7964C10.862 18.5735 11.4563 18.2615 11.9912 17.8603C12.5262 17.4442 12.9868 16.9316 13.3731 16.3224C13.7743 15.7132 14.0567 15.0222 14.2201 14.2496L14.3093 14.2718ZM24.3001 20L22.6062 15.2971L20.0207 18.5735C19.5452 19.1679 19.0549 19.5988 18.5497 19.8663C18.0444 20.1337 17.5615 20.2675 17.1009 20.2675C16.6997 20.2675 16.3282 20.1709 15.9865 19.9777C15.6596 19.7845 15.407 19.5171 15.2287 19.1753C15.0503 18.8187 14.9612 18.3952 14.9612 17.9049C14.9612 17.4145 15.0801 16.8722 15.3178 16.2778L19.3743 6.3594L20.2659 4.10826L25.9717 20H24.3001ZM22.517 15.0519L19.4858 6.67144L15.9865 15.2302C15.7636 15.7652 15.6596 16.263 15.6744 16.7236C15.6893 17.1842 15.7859 17.5928 15.9642 17.9495C16.1573 18.2912 16.4174 18.5587 16.7443 18.7518C17.0712 18.945 17.4352 19.0416 17.8364 19.0416C18.2822 19.0416 18.7502 18.9153 19.2406 18.6627C19.7458 18.3952 20.2362 17.9569 20.7116 17.3477L22.517 15.0519ZM30.2877 5.82448C30.7632 5.23012 31.2535 4.7992 31.7588 4.53174C32.264 4.24942 32.7469 4.10826 33.2075 4.10826C33.6087 4.10826 33.9728 4.20484 34.2997 4.39801C34.6266 4.59118 34.8792 4.86607 35.0575 5.22269C35.2506 5.56444 35.3472 5.9805 35.3472 6.47084C35.3472 6.96119 35.2283 7.50355 34.9906 8.09791L30.0425 20.2675L24.3367 4.39801H25.986L27.7022 9.1009L30.2877 5.82448ZM34.3219 9.14547C34.5448 8.61055 34.6488 8.11277 34.634 7.65214C34.6191 7.19151 34.5151 6.79031 34.3219 6.44856C34.1436 6.09194 33.891 5.81705 33.5641 5.62388C33.2372 5.43071 32.8732 5.33413 32.472 5.33413C32.0262 5.33413 31.5507 5.46786 31.0455 5.73532C30.5403 6.00279 30.05 6.44113 29.5745 7.05035L27.7914 9.34607L30.8226 17.7266L34.3219 9.14547ZM43.8679 20L42.174 15.2971L39.5885 18.5735C39.113 19.1679 38.6226 19.5988 38.1174 19.8663C37.6122 20.1337 37.1293 20.2675 36.6687 20.2675C36.2675 20.2675 35.896 20.1709 35.5543 19.9777C35.2274 19.7845 34.9747 19.5171 34.7964 19.1753C34.6181 18.8187 34.529 18.3952 34.529 17.9049C34.529 17.4145 34.6478 16.8722 34.8856 16.2778L38.9421 6.3594L39.8337 4.10826L45.5395 20H43.8679ZM42.0848 15.0519L39.0536 6.67144L35.5543 15.2302C35.3314 15.7652 35.2274 16.263 35.2422 16.7236C35.2571 17.1842 35.3537 17.5928 35.532 17.9495C35.7251 18.2912 35.9852 18.5587 36.3121 18.7518C36.639 18.945 37.003 19.0416 37.4042 19.0416C37.85 19.0416 38.318 18.9153 38.8084 18.6627C39.3136 18.3952 39.8039 17.9569 40.2794 17.3477L42.0848 15.0519ZM56.7439 19.7994V20H46.9592V4.44259H48.4748V17.9272C48.4748 18.3432 48.4897 18.6775 48.5194 18.9301C48.564 19.1679 48.6531 19.3536 48.7869 19.4874C48.9206 19.6211 49.1212 19.7102 49.3887 19.7548C49.671 19.7845 50.0499 19.7994 50.5254 19.7994H56.7439ZM57.9511 20V4.44259H59.4667V20H57.9511ZM71.6023 19.7994V20H62.152V4.44259H71.3349V4.64318H65.7182C65.2872 4.64318 64.9381 4.65804 64.6706 4.68776C64.418 4.71748 64.2174 4.78434 64.0688 4.88836C63.9202 4.99237 63.8162 5.14096 63.7568 5.33413C63.7122 5.51244 63.6825 5.75761 63.6676 6.06965V11.887H69.0169V12.0876H63.6676V18.3729C63.6825 18.685 63.7122 18.9376 63.7568 19.1307C63.8162 19.3091 63.9202 19.4502 64.0688 19.5542C64.2174 19.6582 64.418 19.7251 64.6706 19.7548C64.9381 19.7845 65.2872 19.7994 65.7182 19.7994H71.6023ZM76.4235 14.2496C76.8989 14.7993 77.4339 15.364 78.0282 15.9435C78.6226 16.5081 79.2764 17.0505 79.9896 17.5705C80.7029 18.0758 81.4681 18.5438 82.2853 18.9747C83.1175 19.3908 84.0016 19.7325 84.9377 20H81.7281C81.431 20 81.0595 19.8514 80.6137 19.5542C80.1828 19.2422 79.7147 18.841 79.2095 18.3506C78.7192 17.8603 78.2214 17.3179 77.7162 16.7236C77.2258 16.1144 76.7578 15.5126 76.312 14.9182C75.8811 14.3238 75.5022 13.7666 75.1753 13.2466C74.8633 12.7265 74.6478 12.3104 74.5289 11.9984V20H73.0133V4.44259H77.4487C79.5736 4.44259 81.1263 4.89579 82.107 5.80219C83.0877 6.69373 83.5781 7.95675 83.5781 9.59124C83.5781 10.4828 83.4444 11.2629 83.1769 11.9315C82.9094 12.5853 82.5528 13.1351 82.107 13.5809C81.6613 14.0267 81.1561 14.361 80.5914 14.5839C80.0268 14.8068 79.4473 14.9182 78.8529 14.9182C77.9762 14.9182 77.1664 14.6953 76.4235 14.2496ZM74.5289 11.5972C74.9153 12.459 75.4502 13.1054 76.1337 13.5363C76.8172 13.9672 77.523 14.1827 78.2511 14.1827C78.7266 14.1827 79.1872 14.0935 79.633 13.9152C80.0788 13.7221 80.4725 13.4397 80.8143 13.0683C81.1561 12.6819 81.431 12.2064 81.639 11.6418C81.847 11.0771 81.951 10.4159 81.951 9.65811C81.951 8.76657 81.8396 8.00133 81.6167 7.36239C81.4087 6.72345 81.1041 6.20338 80.7029 5.80219C80.3165 5.40099 79.841 5.11124 79.2764 4.93293C78.7266 4.73977 78.1174 4.64318 77.4487 4.64318H75.5988C75.361 4.6729 75.1679 4.72491 75.0193 4.7992C74.8707 4.85864 74.7592 4.96265 74.685 5.11124C74.6255 5.24497 74.5809 5.42328 74.5512 5.64617C74.5364 5.86905 74.5289 6.14395 74.5289 6.47084V11.5972Z" fill="currentColor  "/>
<path d="M30.6421 25.2784V41.1256H30.3969L20.5899 27.1061V40.8358H20.3448V25.2784H21.1694L30.3969 38.3172V25.2784H30.6421ZM40.1817 24.9441C41.3705 24.9441 42.4255 25.167 43.3467 25.6127C44.2828 26.0436 45.0704 26.6306 45.7093 27.3735C46.3483 28.1165 46.8386 28.9783 47.1804 29.959C47.5221 30.9397 47.693 31.9724 47.693 33.0571C47.693 34.127 47.5221 35.1522 47.1804 36.1329C46.8386 37.1136 46.3483 37.9829 45.7093 38.7407C45.0704 39.4836 44.2828 40.078 43.3467 40.5238C42.4255 40.9547 41.3705 41.1701 40.1817 41.1701C39.0079 41.1701 37.9529 40.9547 37.0168 40.5238C36.0955 40.078 35.308 39.4836 34.6542 38.7407C34.0152 37.9829 33.5249 37.1136 33.1831 36.1329C32.8562 35.1522 32.6928 34.127 32.6928 33.0571C32.6928 31.9724 32.8562 30.9397 33.1831 29.959C33.5249 28.9783 34.0152 28.1165 34.6542 27.3735C35.308 26.6306 36.0955 26.0436 37.0168 25.6127C37.9529 25.167 39.0079 24.9441 40.1817 24.9441ZM41.4968 40.5461C42.4478 40.5758 43.2501 40.39 43.9039 39.9889C44.5726 39.5728 45.0927 39.023 45.4641 38.3395C45.8505 37.656 46.0956 36.8759 46.1997 35.9992C46.3185 35.1077 46.3111 34.1938 46.1774 33.2577C46.0436 32.3216 45.7836 31.4003 45.3973 30.4939C45.0109 29.5875 44.5132 28.7777 43.9039 28.0645C43.2947 27.3364 42.5741 26.7495 41.7419 26.3037C40.9098 25.843 39.9737 25.5979 38.9336 25.5682C37.9975 25.5384 37.1951 25.7242 36.5264 26.1254C35.8726 26.5266 35.3526 27.0689 34.9662 27.7524C34.5799 28.436 34.3199 29.2235 34.1861 30.115C34.0673 31.0066 34.0673 31.9204 34.1861 32.8565C34.3199 33.7926 34.5725 34.7139 34.9439 35.6203C35.3154 36.5118 35.8058 37.3217 36.415 38.0497C37.0391 38.763 37.7746 39.3499 38.6216 39.8105C39.4685 40.2712 40.4269 40.5163 41.4968 40.5461ZM49.7291 40.8358V25.2784H51.2447V40.8358H49.7291ZM57.3401 35.0854C57.8156 35.6352 58.3505 36.1998 58.9449 36.7793C59.5392 37.3439 60.193 37.8863 60.9063 38.4064C61.6195 38.9116 62.3848 39.3796 63.202 39.8105C64.0341 40.2266 64.9182 40.5684 65.8543 40.8358H62.6448C62.3476 40.8358 61.9761 40.6872 61.5304 40.39C61.0994 40.078 60.6314 39.6768 60.1262 39.1865C59.6358 38.6961 59.1381 38.1538 58.6328 37.5594C58.1425 36.9502 57.6744 36.3484 57.2287 35.754C56.7978 35.1597 56.4188 34.6025 56.0919 34.0824C55.7799 33.5623 55.5645 33.1463 55.4456 32.8342V40.8358H53.93V25.2784H58.3654C60.4902 25.2784 62.043 25.7316 63.0237 26.638C64.0044 27.5296 64.4947 28.7926 64.4947 30.4271C64.4947 31.3186 64.361 32.0987 64.0935 32.7674C63.8261 33.4212 63.4695 33.9709 63.0237 34.4167C62.5779 34.8625 62.0727 35.1968 61.5081 35.4197C60.9434 35.6426 60.3639 35.754 59.7696 35.754C58.8929 35.754 58.0831 35.5311 57.3401 35.0854ZM55.4456 32.433C55.8319 33.2949 56.3668 33.9412 57.0504 34.3721C57.7339 34.803 58.4397 35.0185 59.1678 35.0185C59.6433 35.0185 60.1039 34.9294 60.5497 34.751C60.9954 34.5579 61.3892 34.2756 61.731 33.9041C62.0727 33.5177 62.3476 33.0423 62.5556 32.4776C62.7637 31.913 62.8677 31.2517 62.8677 30.4939C62.8677 29.6024 62.7562 28.8371 62.5333 28.1982C62.3253 27.5593 62.0207 27.0392 61.6195 26.638C61.2332 26.2368 60.7577 25.9471 60.193 25.7688C59.6433 25.5756 59.034 25.479 58.3654 25.479H56.5154C56.2777 25.5087 56.0845 25.5607 55.9359 25.635C55.7873 25.6945 55.6759 25.7985 55.6016 25.9471C55.5422 26.0808 55.4976 26.2591 55.4679 26.482C55.453 26.7049 55.4456 26.9798 55.4456 27.3067V32.433Z" fill="currentColor"/>
</svg>
</span>
        </div>
        {/* Navigation Ã  droite avec SVG */}
        <nav className="flex-1 flex justify-end">
          <ul className={`flex gap-10 text-xs font-inter items-center ${textColorClass}`}>
            {navLinks.map(link => (
              <li key={link.href}>
                {link.href.startsWith('/') ? (
                  <Link 
                    to={link.href} 
                    className={`hover:opacity-80 transition-colors duration-150 font-inter text-[12px] ${textColorClass}`}
                  >
                    {link.label}
                  </Link>
                ) : (
                  <a 
                    href={link.href} 
                    className={`hover:opacity-80 transition-colors duration-150 font-inter text-[12px] ${textColorClass}`}
                  >
                    {link.label}
                  </a>
                )}
              </li>
            ))}
            <li className="flex items-center gap-4">
              <button
                onClick={togglePlay}
                className={`hover:opacity-80 transition-colors duration-150 ${textColorClass}`}
              >
                {isPlaying ? 'ON' : 'OFF'}
              </button>
              <img src={logo} alt="Logo SVG" className={`h-8 w-8 ml-4 ${isNewsSection ? 'invert' : ''}`} />
            </li>
          </ul>
        </nav>
      </div>
    </header>
  );
};

export default Header; 